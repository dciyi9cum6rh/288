function Accountingfunction(n){var t={GetAccountingListUrl:"",DeleteAccountingUrl:""},i,r;t=$.extend(t,n);$(window).keydown(function(n){if(n.keyCode===13)return n.preventDefault(),!1});$(document).on("click","#btnSearch",function(n){n.preventDefault();jAccountingSubject=$("#AccountingSubject").val();$.ajax({type:"Post",cache:!1,dataType:"HTML",url:t.GetAccountingListUrl,data:{AccountingSubject:jAccountingSubject},beforeSend:LoadBefore,success:GetAccountingListSuccess,error:SystemError})});$(document).on("click",".page-link",function(n){n.preventDefault();var r=$(this).attr("href").split("?"),i=r[1].split("&"),u=i[0].split("="),f=i[1].split("="),e=i[2].split("=");$.ajax({type:"Post",cache:!1,dataType:"HTML",url:t.GetAccountingListUrl,data:{AccountingSubject:jAccountingSubject,Page:parseInt(u[1]),LinkType:parseInt(f[1]),StartPage:parseInt(e[1])},beforeSend:LoadBefore,success:GetAccountingListSuccess,error:SystemError})});$("#btnAdd").on("click",function(n){n.preventDefault();$("#add-one input").val("");$("#add-one textarea").val("");$("#CreateForm").attr("Style","");$("#EditForm").attr("Style","display: none;");$("#add-one").modal({backdrop:"static"})});$("#CreateSubmit").on("click",function(n){function e(){}function o(n){n==0?alert("新增成功！"):n==1?alert("無此權限！"):n==2?alert("新增失敗,科目代碼重覆！"):n==3?alert("新增失敗,科目名稱重覆！"):alert("執行失敗，請再試一次！")}n.preventDefault();$(this).prop("disabled",!0);i=$(this);var t=!0,r="",u={AccountingId:$("#AccountingId").val(),AccountingSubject:$("#AccountingSubjectF").val()},f={AccountingId:"科目代碼必填！",AccountingSubject:"科目名稱必填！"};$.each(u,function(n,i){(i==""||i==null)&&(t=!1,r+=f[n]+"\r\n")});t?$("#CreateForm").ajaxSubmit({beforeSubmit:e,success:o,error:SystemError}):alert(r);i.prop("disabled",!1)});$(document).on("click",".btn-edit",function(n){n.preventDefault();$("#add-one input").val("");$("#add-one textarea").val("");$tr=$(this).closest("tr");$("#EditAccountingId").val($tr.find("td:eq(0)").text());$("#EditAccountingSubjectF").val($tr.find("td:eq(1)").text());$("#EditAccountingDescription").val($tr.find("td:eq(2)").text());$("#EditForm").attr("Style","");$("#CreateForm").attr("Style","display: none;");$("#add-one").modal({backdrop:"static"})});$("#EditSubmit").on("click",function(n){function e(){}function o(n){n==0?alert("修改成功！"):n==1?alert("無此權限！"):n==3?alert("修改失敗,科目名稱重覆！"):alert("執行失敗，請再試一次！")}n.preventDefault();$(this).prop("disabled",!0);r=$(this);var t=!0,i="",u={AccountingId:$("#EditAccountingId").val(),AccountingSubject:$("#EditAccountingSubjectF").val()},f={AccountingId:"科目代碼必填！",AccountingSubject:"科目名稱必填！"};$.each(u,function(n,r){(r==""||r==null)&&(t=!1,i+=f[n]+"\r\n")});t?$("#EditForm").ajaxSubmit({beforeSubmit:e,success:o,error:SystemError}):alert(i);r.prop("disabled",!1)});$(document).on("click",".btn-delete",function(){function i(){}function r(n){n==0?(alert("刪除成功"),$selecteditadmin.html("")):n==2?alert("無此權限！"):alert("刪除失敗，請稍後再試！")}if(confirm("確定刪除？")){var n=$(this);$selecteditadmin=n.closest("tr");jAccountingId=$selecteditadmin.find("td:eq(0)").text();$.ajax({type:"POST",cache:!1,url:t.DeleteAccountingUrl,data:{AccountingId:jAccountingId},beforeSend:i,success:r,error:SystemError})}})}function GetAccountingListSuccess(n){$("Div#AccountingList").html(n)}function LoadBefore(){}function SystemError(){alert("系統錯誤，請稍後再試！")}let jAccountingSubject="",jAccountingId;
